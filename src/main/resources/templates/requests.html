<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/layout.html">
<head>
    <title>Все заявки</title>
</head>
<body>
<div layout:fragment="content">
    <h2>Все заявки</h2>
    <table class="table table-bordered table-hover">
        <thead>
        <tr>
            <th>ID</th>
            <th>Имя</th>
            <th>Курс</th>
            <th>Телефон</th>
            <th>Обработано?</th>
            <th>Действия</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="req : ${requests}">
            <td th:text="${req.id}">1</td>
            <td th:text="${req.userName}">Иван</td>
            <td th:text="${req.courseName}">Java</td>
            <td th:text="${req.phone}">+7...</td>
            <td>
                <span th:text="${req.handled} ? 'Да' : 'Нет'">Нет</span>
            </td>
            <td>
                <!-- Ссылка на детальный просмотр -->
                <a class="btn btn-primary btn-sm"
                   th:href="@{/requests/{id}(id=${req.id})}">
                    Подробнее
                </a>
                <!-- Ссылка на редактирование -->
                <a class="btn btn-secondary btn-sm"
                   th:href="@{/requests/{id}/edit(id=${req.id})}">
                    Редактировать
                </a>
                <!-- Удаление (submit form) -->
                <form th:action="@{/requests/{id}/delete(id=${req.id})}"
                      method="post" style="display:inline-block">
                    <button class="btn btn-danger btn-sm" type="submit">
                        Удалить
                    </button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</div>
</body>
</html>